from langchain_ollama import OllamaEmbeddings
import numpy as np
from numpy.linalg import norm


def cosine_similarity(vec1, vec2):
    """计算两个向量的余弦相似度"""
    return np.dot(vec1, vec2)/(norm(vec1)*norm(vec2))


bge_model = OllamaEmbeddings(
    base_url="http://127.0.0.1:11434",
    model="bge-m3:latest"  # 替换为实际模型名称
)

result1 = bge_model.embed_query("""
阑尾炎手术后需注意以下事项，以促进恢复并预防并发症：
伤口护理

保持切口清洁干燥，按医嘱更换敷料。
避免沾水，洗澡时可用防水敷料保护。
若发现红肿、渗液、发热（体温＞38℃），立即就医。
活动与休息

术后24小时内可尝试下床轻微活动，预防血栓和肠粘连。
1周内避免提重物（＞5kg）及剧烈运动（如跑步、游泳）。
保证充足睡眠，避免疲劳。
饮食管理

术后1-2天：流质饮食（米汤、稀粥），逐步过渡到半流质（面条、蒸蛋）。
3天后：可尝试软食，避免牛奶、豆类等易胀气食物。
1周后：逐步恢复正常饮食，以高蛋白（鱼、瘦肉）、高纤维（蔬菜、水果）为主，忌辛辣、油炸食品。
疼痛处理

按医嘱服用止痛药（如布洛芬），勿自行调整剂量。
若疼痛持续加重或伴随呕吐，需警惕肠梗阻可能。
并发症监测

感染迹象：切口红肿热痛、脓性分泌物、持续发热。
肠梗阻症状：腹胀、停止排气排便、呕吐胆汁样液体。
深静脉血栓：小腿肿胀、疼痛、发红。
出现上述症状需立即就医。
复诊与拆线

术后7-10天门诊复诊，评估伤口愈合情况并拆线（若为可吸收线则无需拆线）。
腹腔镜手术患者通常恢复更快，但仍需遵医嘱复查。
特殊注意事项

咳嗽或打喷嚏时用手按压腹部，减少伤口张力。
术后1个月内避免性生活及盆浴，防止感染。
糖尿病患者需严格监测血糖，促进伤口愈合。
紧急情况处理：若出现剧烈腹痛、高热（＞39℃）、意识模糊等，立即拨打急救电话或前往急诊。

遵循以上建议可降低并发症风险，多数患者术后2-4周可恢复正常生活。""")
result2 = bge_model.embed_query("""
头疼可能由多种原因引起，如紧张、疲劳、压力或轻度疾病。以下是一些简单的护理建议：

1. **休息**：找一个安静、光线柔和的地方休息，尽量放松身体。
2. **水分充足**：喝足够的水，保持体内水分充足，有助于缓解因脱水引起的头痛。
3. **冷敷或热敷**：根据个人感觉选择，有些人喜欢用冰袋冷敷太阳穴或额头，而有些人则偏爱温热敷布。
4. **按摩**：轻轻按摩头部和颈部，有助于放松肌肉。
5. **避免刺激**：减少噪音、强光和气味的刺激，这些可能会加重头痛。
6. **适量运动**：适度的活动，如散步，可以帮助减轻压力和改善血液循环。
7. **饮食注意**：避免咖啡因、酒精和过量糖分摄入，可以尝试吃一些富含镁的食物，如坚果和绿叶蔬菜。

如果头疼频繁发作或剧烈难忍，建议尽快咨询医生，以排除更严重的问题。你可以在京东健康App中预约在线问诊，获取专业的医疗建议。希望你早日康复！😊
""")
similarity = cosine_similarity(result1, result2)
print(f"相似度: {similarity:.4f}")
