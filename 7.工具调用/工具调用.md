工具调用分为以下几个步骤
1. 定义工具
2. 绑定工具到模型
3. 调用模型
4. 如果返回了工具调用 调用工具
5. 将调用工具返回的结果构建为tool类型的message
6. 将消息和tool类型的消息合并 然后再次调用大模型

# 工具类型
工具分为内置工具和自定义工具
## 自定义工具
模型需要的工具需要三个主要属性 `name(工具名)` `description(工具描述)` `parameters(参数)`, 入参示例如下:
```json
{
    "type": "function",
    "function": {
        "name": "get_weather",
        "description": "Get weather of an location, the user shoud supply a location first",
        "parameters": {
            "type": "object",
            "properties": {
                "location": {
                    "type": "string",
                    "description": "The city and state, e.g. San Francisco, CA",
                }
            },
            "required": ["location"]
        }
    }
}

```
### 通过@tool装饰器创建工具
tool可以配置的属性如下:
- name_or_callable：工具名称或可调用对象，当直接传入函数时自动推断名称
- runnable：可运行对象，实现工具核心逻辑的可调用对象或Runnable实例
- *args：可变位置参数，用于接收额外参数
- description：工具描述文本，说明工具的功能用途
- return_direct：布尔值，控制是否直接返回原始结果而非封装对象
- args_schema：参数模式定义，用于验证输入参数的结构
- infer_schema：是否自动推断参数模式，默认开启
- response_format：响应格式枚举，控制返回内容形式
- parse_docstring：是否解析docstring获取描述信息
- error_on_invalid_docstring：无效docstring时是否报错

name: 函数名
description: 文档字符串 也就是方法注释

```python
from langchain_core.tools import tool

@tool
def get_weather(location: str) -> str:
    """Get weather of a location"""
    return "大暴雨"

``` 
### 通过StructuredTool.from_function 创建工具


## 内置工具
langchain为我们提供了以下内置工具
```
BaseTool 工具基类
 +-- AINAppOps (AI网络应用操作工具)
 +-- AINBaseTool (AI网络基础工具)
 +-- AINOwnerOps (所有者操作工具)
 +-- AINRuleOps (规则操作工具)
 +-- AINTransfer (数据传输工具)
 +-- AINValueOps (数值操作工具)
 +-- AIPluginTool (AI插件工具)
 +-- AmadeusBaseTool (Amadeus基础工具)
 +-- AmadeusClosestAirport (最近机场查询工具)
 +-- AmadeusFlightSearch (航班搜索工具)
 +-- ArxivQueryRun (Arxiv论文查询工具)
 +-- AskNewsSearch (新闻搜索工具)
 +-- AzureAiServicesDocumentIntelligenceTool (Azure文档智能分析工具)
 +-- AzureAiServicesImageAnalysisTool (Azure图像分析工具)
 +-- AzureAiServicesSpeechToTextTool (Azure语音转文字工具)
 +-- AzureAiServicesTextAnalyticsForHealthTool (Azure医疗文本分析工具)
 +-- AzureAiServicesTextToSpeechTool (Azure文本转语音工具)
 +-- AzureCogsFormRecognizerTool (Azure表单识别工具)
 +-- AzureCogsImageAnalysisTool (Azure认知服务图像分析工具)
 +-- AzureCogsSpeech2TextTool (Azure语音转文本工具)
 +-- AzureCogsText2SpeechTool (Azure文本转语音工具)
 +-- AzureCogsTextAnalyticsHealthTool (Azure健康文本分析工具)
 +-- BalanceSheets (资产负债表工具)
 +-- BaseBrowserTool (基础浏览器工具)
 +-- BaseGraphQLTool (GraphQL基础工具)
 +-- BingSearchResults (必应搜索结果工具)
 +-- BingSearchRun (必应搜索执行工具)
 +-- BraveSearch (Brave搜索引擎工具)
 +-- CashFlowStatements (现金流量表工具)
 +-- ClickTool (点击操作工具)
 +-- ClickupAction (Clickup任务管理工具)
 +-- CogniswitchKnowledgeRequest (认知切换知识请求工具)
 +-- CogniswitchKnowledgeSourceFile (文件知识源工具)
 +-- CogniswitchKnowledgeSourceURL (URL知识源工具)
 +-- CogniswitchKnowledgeStatus (知识状态检查工具)
 +-- ConneryAction (Connery动作执行工具)
 +-- CopyFileTool (文件复制工具)
 +-- CurrentWebPageTool (当前网页分析工具)
 +-- DataForSeoAPISearchResults (SEO数据API结果工具)
 +-- DataForSeoAPISearchRun (SEO数据API执行工具)
 +-- DataheraldTextToSQL (文本转SQL工具)
 +-- DeleteFileTool (文件删除工具)
 +-- DuckDuckGoSearchResults (DuckDuckGo搜索结果工具)
 +-- DuckDuckGoSearchRun (DuckDuckGo搜索执行工具)
 +-- E2BDataAnalysisTool (E2B数据分析工具)
 +-- EdenAiExplicitImageTool (EdenAI显式图像分析工具)
 +-- EdenAiObjectDetectionTool (EdenAI对象检测工具)
 +-- EdenAiParsingIDTool (EdenAI身份证解析工具)
 +-- EdenAiParsingInvoiceTool (EdenAI发票解析工具)
 +-- EdenAiSpeechToTextTool (EdenAI语音转文本工具)
 +-- EdenAiTextModerationTool (EdenAI文本审核工具)
 +-- EdenAiTextToSpeechTool (EdenAI文本转语音工具)
 +-- EdenaiTool (EdenAI综合工具)
 +-- ElevenLabsText2SpeechTool (ElevenLabs文本转语音工具)
 +-- ExceptionTool (异常处理工具)
 +-- ExecJavaScript (JavaScript执行工具)
 +-- ExecPython (Python执行工具)
 +-- ExtractHyperlinksTool (超链接提取工具)
 +-- ExtractTextTool (文本提取工具)
 +-- FewShotSQLTool (少量示例SQL生成工具)
 +-- FileSearchTool (文件搜索工具)
 +-- GetElementsTool (元素获取工具)
 +-- GetSchemaCassandraDatabaseTool (Cassandra数据库模式获取工具)
 +-- GetTableDataCassandraDatabaseTool (Cassandra表数据获取工具)
 +-- GitHubAction (GitHub操作工具)
 +-- GitLabAction (GitLab操作工具)
 +-- GmailBaseTool (Gmail基础工具)
 +-- GmailCreateDraft (Gmail草稿创建工具)
 +-- GmailGetMessage (Gmail消息获取工具)
 +-- GmailGetThread (Gmail会话获取工具)
 +-- GmailSearch (Gmail搜索工具)
 +-- GmailSendMessage (Gmail消息发送工具)
 +-- GoldenQueryRun (Golden查询执行工具)
 +-- GoogleBooksQueryRun (谷歌图书查询工具)
 +-- GoogleCloudTextToSpeechTool (谷歌云文本转语音工具)
 +-- GoogleFinanceQueryRun (谷歌财经查询工具)
 +-- GoogleJobsQueryRun (谷歌职位查询工具)
 +-- GoogleLensQueryRun (谷歌镜头查询工具)
 +-- GooglePlacesTool (谷歌地点查询工具)
 +-- GoogleScholarQueryRun (谷歌学术查询工具)
 +-- GoogleSearchResults (谷歌搜索结果工具)
 +-- GoogleSearchRun (谷歌搜索执行工具)
 +-- GoogleSerperResults (谷歌Serper结果工具)
 +-- GoogleSerperRun (谷歌Serper执行工具)
 +-- GoogleTrendsQueryRun (谷歌趋势查询工具)
 +-- HuggingFaceInjectionIdentifier (HuggingFace注入识别工具)
 +-- HuggingFaceTextToSpeechModelInference (HuggingFace文本转语音推理工具)
 +-- HumanInputRun (人工输入工具)
 +-- IFTTTWebhook (IFTTT网络钩子工具)
 +-- IncomeStatements (利润表工具)
 +-- InfoPowerBITool (PowerBI信息获取工具)
 +-- InfoSQLDatabaseTool (SQL数据库信息工具)
 +-- InfoSparkSQLTool (SparkSQL信息工具)
 +-- InvalidTool (无效工具占位符)
 +-- JinaSearch (Jina搜索工具)
 +-- JiraAction (Jira操作工具)
 +-- JsonGetValueTool (JSON值获取工具)
 +-- JsonListKeysTool (JSON键列表工具)
 +-- ListDirectoryTool (目录列表工具)
 +-- ListPowerBITool (PowerBI列表工具)
 +-- ListSQLDatabaseTool (SQL数据库列表工具)
 +-- ListSparkSQLTool (SparkSQL列表工具)
 +-- Memorize (记忆存储工具)
 +-- MerriamWebsterQueryRun (韦氏词典查询工具)
 +-- MetaphorSearchResults (Metaphor搜索结果工具)
 +-- MojeekSearch (Mojeek搜索工具)
 +-- MoveFileTool (文件移动工具)
 +-- MultionCloseSession (Multion会话关闭工具)
 +-- MultionCreateSession (Multion会话创建工具)
 +-- MultionUpdateSession (Multion会话更新工具)
 +-- NLATool (自然语言分析工具)
 +-- NasaAction (NASA数据操作工具)
 +-- NavigateBackTool (导航返回工具)
 +-- NavigateTool (导航工具)
 +-- NucliaUnderstandingAPI (Nuclia理解API工具)
 +-- NutritionAI (营养AI分析工具)
 +-- O365BaseTool (Office365基础工具)
 +-- O365CreateDraftMessage (Office365草稿创建工具)
 +-- O365SearchEmails (Office365邮件搜索工具)
 +-- O365SearchEvents (Office365事件搜索工具)
 +-- O365SendEvent (Office365事件发送工具)
 +-- O365SendMessage (Office365消息发送工具)
 +-- OpenAIDALLEImageGenerationTool (OpenAI DALL·E图像生成工具)
 +-- OpenWeatherMapQueryRun (OpenWeatherMap天气查询工具)
 +-- PolygonAggregates (Polygon聚合数据工具)
 +-- PolygonFinancials (Polygon财务数据工具)
 +-- PolygonLastQuote (Polygon最新报价工具)
 +-- PolygonTickerNews (Polygon股票新闻工具)
 +-- PubmedQueryRun (PubMed文献查询工具)
 +-- PythonAstREPLTool (Python AST交互工具)
 +-- PythonREPLTool (Python交互式工具)
 +-- QueryCassandraDatabaseTool (Cassandra数据库查询工具)
 +-- QueryCheckerTool (查询检查工具)
 +-- QueryPowerBITool (PowerBI查询工具)
 +-- QuerySQLCheckerTool (SQL查询检查工具)
 +-- QuerySQLDataBaseTool (SQL数据库查询工具)
 +-- QuerySQLDatabaseTool (SQL数据库查询工具)
 +-- QuerySparkSQLTool (SparkSQL查询工具)
 +-- ReadFileTool (文件读取工具)
 +-- RedditSearchRun (Reddit搜索工具)
 +-- RequestsDeleteTool (HTTP DELETE请求工具)
 +-- RequestsDeleteToolWithParsing (带解析的DELETE请求工具)
 +-- RequestsGetTool (HTTP GET请求工具)
 +-- RequestsGetToolWithParsing (带解析的GET请求工具)
 +-- RequestsPatchTool (HTTP PATCH请求工具)
 +-- RequestsPatchToolWithParsing (带解析的PATCH请求工具)
 +-- RequestsPostTool (HTTP POST请求工具)
 +-- RequestsPostToolWithParsing (带解析的POST请求工具)
 +-- RequestsPutTool (HTTP PUT请求工具)
 +-- RequestsPutToolWithParsing (带解析的PUT请求工具)
 +-- SceneXplainTool (场景解释工具)
 +-- SearchAPIResults (搜索API结果工具)
 +-- SearchAPIRun (搜索API执行工具)
 +-- SearxSearchResults (Searx搜索结果工具)
 +-- SearxSearchRun (Searx搜索执行工具)
 +-- SemanticScholarQueryRun (语义学者查询工具)
 +-- ShellTool (Shell命令工具)
 +-- SlackBaseTool (Slack基础工具)
 +-- SlackGetChannel (Slack频道获取工具)
 +-- SlackGetMessage (Slack消息获取工具)
 +-- SlackScheduleMessage (Slack消息调度工具)
 +-- SlackSendMessage (Slack消息发送工具)
 +-- SleepTool (休眠工具)
 +-- StackExchangeTool (StackExchange问答工具)
 +-- SteamWebAPIQueryRun (Steam网络API查询工具)
 +-- SteamshipImageGenerationTool (Steamship图像生成工具)
 +-- StructuredTool (结构化数据处理工具)
 +-- TavilyAnswer (Tavily问答工具)
 +-- TavilySearchResults (Tavily搜索结果工具)
 +-- Tool (通用工具基类)
 +-- VectorStoreQATool (向量存储问答工具)
 +-- VectorStoreQAWithSourcesTool (带来源的向量存储问答工具)
 +-- WikidataQueryRun (维基数据查询工具)
 +-- WikipediaQueryRun (维基百科查询工具)
 +-- WolframAlphaQueryRun (WolframAlpha查询工具)
 +-- WriteFileTool (文件写入工具)
 +-- YahooFinanceNewsTool (雅虎财经新闻工具)
 +-- YouSearchTool (You搜索工具)
 +-- YouTubeSearchTool (YouTube搜索工具)
 +-- ZapierNLAListActions (Zapier自然语言动作列表工具)
 +-- ZapierNLARunAction (Zapier自然语言动作执行工具)
 +-- ZenGuardTool (ZenGuard安全工具)
```

